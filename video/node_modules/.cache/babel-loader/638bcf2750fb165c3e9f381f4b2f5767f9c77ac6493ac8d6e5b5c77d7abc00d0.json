{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\msado\\\\OneDrive\\\\Pulpit\\\\video-stream\\\\video\\\\src\\\\components\\\\VideoPlayer.jsx\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useRef, useState } from \"react\";\n\n// const VideoPlayer = () => {\n//   const videoRef = useRef(null);\n//   const websocketRef = useRef(null);\n//   const videoChunksRef = useRef([]); // To store received video chunks\n//   console.log(videoChunksRef)\n//   const [videoURL, setVideoURL] = useState(null);\n// console.log(videoURL)\n//   useEffect(() => {\n//     // Create a WebSocket connection\n//     // const socket = new WebSocket(\"ws://192.168.0.185:8080\");\n//     const socket =new WebSocket('ws://192.168.0.186:33333')\n\n//     socket.onopen = () => {\n//       socket.send(\"Message to send\");\n//       console.log(\"Connected to server\");\n//     };\n\n//     socket.onmessage = (event) => {\n//       // Receive video data from the server\n//       const data = event.data;\n\n//       const fileReader = new FileReader();\n//       // Set up the onload event to handle the result when it's ready\n//       fileReader.onload = function(event) {\n//         // The result contains the Base64 encoded data\n//         const base64Datas = event.target.result;\n//         const base64Data = base64Datas.replace(/^data:application\\/octet-stream;base64,/, '');\n//         console.log(base64Data)\n//         const binaryData = atob(base64Data);\n\n//         // Convert the binary data to a Uint8Array buffer\n//         const arrayBuffer = new Uint8Array(binaryData.length);\n//         for (let i = 0; i < binaryData.length; i++) {\n//           arrayBuffer[i] = binaryData.charCodeAt(i);\n//         }\n\n//         // Store the received chunk in the videoChunksRef\n//         videoChunksRef.current.push(arrayBuffer);\n\n//         // Combine all the chunks into a single Uint8Array buffer\n//         const combinedBuffer = new Uint8Array(videoChunksRef.current.reduce((totalLength, chunk) => totalLength + chunk.length, 0));\n//         let offset = 0;\n//         videoChunksRef.current.forEach(chunk => {\n//           combinedBuffer.set(chunk, offset);\n//           offset += chunk.length;\n//         });\n\n//         // Create a Blob from the combined Uint8Array buffer\n//         const videoBlob = new Blob([combinedBuffer], { type: 'video/mp4' });\n//         console.log(videoBlob.type)\n\n//         // Create an object URL from the Blob\n//         const videoURL = URL.createObjectURL(videoBlob);\n\n//         // Set the video URL state\n//         setVideoURL(videoURL);\n//       };\n\n//       // Read the Blob data as Base64\n//       fileReader.readAsDataURL(data);\n//     };\n\n//     socket.onclose = () => {\n//       console.log(\"Disconnected from server\");\n//     };\n\n//     websocketRef.current = socket;\n\n//     return () => {\n//       // Clean up the WebSocket connection\n//       websocketRef.current.close();\n//     };\n//   }, []);\n\n//   const handlePlayVideo = () => {\n//     if (videoURL) {\n//       // Play the video if the URL is available\n//       videoRef.current.src = videoURL;\n//       videoRef.current.play()\n//         .catch(error => {\n//           console.error(\"Error while playing video:\", error);\n//         });\n//     }\n//   };\n\n//   return (\n//     <div>\n//       {/* Video element with controls */}\n//       <video ref={videoRef} controls />\n\n//       {/* Play button */}\n//       <button onClick={handlePlayVideo}>Play Video</button>\n//     </div>\n//   );\n// };\n\n// export default VideoPlayer;\n// //////////////////////////////////\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoPlayer = () => {\n  _s();\n  const videoRef = useRef(null);\n  const websocketRef = useRef(null);\n  const [videoURL, setVideoURL] = useState(null);\n  const [arr, setArr] = useState(null);\n  /////////////////// decoding base-64\n  const base64Data = \"QUFBQUhHWjBlWEJwYzI4MUFBQUFBV0YyWXpGcGMyODFaR0Z6YUFBQUFBaG1jbVZsQUFBQVdtWnlaV1ZKYzI5TlpXUnBZU0JHYVd4bElGQnliMlIxWTJWa0lIZHBkR2dnUjFCQlF5QXdMalV1TWkxRVJWWXRjbVYyVm1WeWMybHZiam9nTUM0MUxqSXROREkyTFdkak5XRmtOR1UwSzJSbWMyYzFMVFVBQUFBRkNXMXZiM1lBQUFCc2JYWm9aQUFBQUFCOEpiQ0F6L0JjSlFBQUErZ0FBQUFBQUFFQUFBRUFBQUFBQUFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU1BQUFCNGJYWmxlQUFBQUJCdFpXaGtBQUFBQUFBQ20yc0FBQUFnZEhKbGVBQUFBQUFBQUFBQkFBQUFBUUFBQWdBQUFBQUFBQUVBQUFBQUFDQjBjbVY0QUFBQUFBQUFBQUlBQUFBQkFBQUVBQUFBQUFBQ0FBQUFBQUFBRUhSeVpYQUFBQUFBQUFBQUFRQUFBQkIwY21Wd0FBQUFBQUFBQUFJQUFBSDlkSEpoYXdBQUFGeDBhMmhrQUFBQUQzd2xzSURnMUNETkFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJBQUFBQUFBQUFBQUFBQUFBQUFBQUFRQUFBQUFBQUFBQUFBQUFBQUFBUUFBQUFBVUFBQUFDMEFBQUFBQUFKR1ZrZEhNQUFBQWNaV3h6ZEFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQVFBQUFBQUJkVzFrYVdFQUFBQWdiV1JvWkFBQUFBQjhKYkNBZkNXd2dBQUFNZ0FBQUFBQVZjUUFBQUFBQUMxb1pHeHlBQUFBQUFBQUFBQjJhV1JsQUFBQUFBQUFBQUFBQUFBQVZtbGtaVzlJWVc1a2JHVnlBQUFBQVNCdGFXNW1BQUFBRkhadGFHUUFBQUFCQUFBQUFBQUFBQUFBQUFBa1pHbHVaZ0FBQUJ4a2NtVm1BQUFBQUFBQUFBRUFBQUFNZFhKc0lBQUFBQUVBQUFEZ2MzUmliQUFBQUpSemRITmtBQUFBQUFBQUFBRUFBQUNFWVhaak1RQUFBQUFBQUFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUF0QUFTQUFBQUVnQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQmovL3dBQUFDNWhkbU5EQVUxQUgvL2hBQmRuVFVBZjJnRkFGdXdFUUFBQUF3QkFBQUFNZzhZTXFBRUFCR2p2UElBQUFBQVFjM1IwY3dBQUFBQUFBQUFBQUFBQUVITjBjMk1BQUFBQUFBQUFBQUFBQUJSemRITjZBQUFBQUFBQUFBQUFBQUFBQUFBQUVITjBZMjhBQUFBQUFBQUFBQUFBQWNCMGNtRnJBQUFBWEhScmFHUUFBQUFQZkNXd2dPRFVJTTBBQUFBQ0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRUJBQUFBQUFFQUFBQUFBQUFBQUFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBa1pXUjBjd0FBQUJ4bGJITjBBQUFBQUFBQUFBRUFBQUFBQUFBQUFBQUJBQUFBQUFFNGJXUnBZUUFBQUNCdFpHaGtBQUFBQUh3bHNJQjhKYkNBQUFDN2dBQUFBQUJWeEFBQUFBQUFMV2hrYkhJQUFBQUFBQUFBQUhOdmRXNEFBQUFBQUFBQUFBQUFBQUJUYjNWdVpFaGhibVJzWlhJQUFBQUE0MjFwYm1ZQUFBQVFjMjFvWkFBQUFBQUFBQUFBQUFBQUpHUnBibVlBQUFBY1pISmxaZ0FBQUFBQUFBQUJBQUFBREhWeWJDQUFBQUFCQUFBQXAzTjBZbXdBQUFCYmMzUnpaQUFBQUFBQUFBQUJBQUFBUzIxd05HRUFBQUFBQUFBQUFRQUFBQUFBQUFBQUFBSUFFQUFBQUFDN2dBQUFBQUFBSjJWelpITUFBQUFBQXhrQUFnQUVFVUFWQUFXekFBY2hpQUFGMjc0RkFoR3dCZ0VDQUFBQUVITjBkSE1BQUFBQUFBQUFBQUFBQUJCemRITmpBQUFBQUFBQUFBQUFBQUFVYzNSemVnQUFBQUFBQUFBQUFBQUFBQUFBQUJCemRHTnZBQUFBQUFBQUFBQUFBQUJnZFdSMFlRQUFBRmh0WlhSaEFBQUFBQUFBQUNGb1pHeHlBQUFBQUFBQUFBQnRaR2x5WVhCd2JBQUFBQUFBQUFBQUFBQUFBQ3RwYkhOMEFBQUFJNmwwYjI4QUFBQWJaR0YwWVFBQUFBRUFBQUFBVEdGMlpqVXpMakkwTGpJQUFBQXNjMmxrZUFBQUFBQUFBQUFCQUFBeUFBQUFBQUFBQUFBQUFBQUFBUUFZczNnQUFhUUFrQUFBQUFBQUNnQnRiMjltQUFBQUVHMW1hR1FBQUFBQUFBQUFBUUFBQTRoMGNtRm1BQUFBRUhSbWFHUUFBZ0FBQUFBQUFRQUFBQkIwWm1SMEFBQUFBQUFBQUFBQUFBTmdkSEoxYmdBQUFnVUFBQURTQUFBS0NBQUFBQUFBQVpzcEFBQUdFZ0FBQ0drQUFBaWdBQUFKMndBQURCQUFBQkJjQUFBQmJRQUFEZk1BQUE5K0FBQVA4UUFBRWhjQUFCT0VBQUFYRlFBQUYyc0FBQmtUQUFBWVJBQUFHbW9BQUJpVEFBQWE5Z0FBR3dRQUFCMHRBQUFiOEFBQUhiY0FBQjN2QUFBZDFRQUFIRWtBQUIxZ0FBQWNRUUFBSGYwQUFCd3FBQUFmdXdBQUF4Y0FBQmdlQUFBYStnQUFHMW9BQUIxZkFBQWRWQUFBSUJvQUFDQkJBQUFocXdBQUg0Y0FBQ0JLQUFBZWJnQUFIelVBQUI2U0FBQWQ0UUFBRzBFQUFCdENBQUFZSFFBQUdUTUFBQmZiQUFBWFRRQUFGcnNBQUJmaUFBQVhzQUFBR2U4QUFBTE9BQUFURmdBQUZWQUFBQlN5QUFBV1BRQUFGZ3NBQUJiS0FBQVY3d0FBRm1JQUFCUjNBQUFZRkFBQUdBNEFBQm5QQUFBWmtRQUFHcEFBQUJyNEFBQWI2Z0FBRytFQUFCNHJBQUFkb1FBQUljd0FBQmw1QUFBaGJ3QUFJTG9BQUJYekFBQUdqZ0FBR2RnQUFCMmpBQUFQV1FBQUZ1Y0FBQk9WQUFBY293QUFDbmtBQUErWUFBQUtPQUFBQ1JrQUFBZ3dBQUFJVmdBQUJaMEFBQWFPQUFBTkRRQUFDbUlBQUFwK0FBQUx0UUFBQzdrQUFBbzJBQUFPQXdBQUVmY0FBQllLQUFBYVpRQUFBeEFBQUJTbEFBQVQvUUFBRmJFQUFCWGhBQUFVb1FBQUhHWUFBQXhLQUFBS2xBQUFFaXdBQUFkK0FBQUlZQUFBRHBVQUFBMlJBQUFTTFFBQUNSd0FBQW9oQUFBSnVBQUFFTkFBQUF0REFBQUlpZ0FBRFRRQUFCRTdBQUFTYWdBQUZYZ0FBQU5MQUFBVE5nQUFGcG9BQUJxTkFBQVpVZ0FBR3ZZQUFCcnFBQUFXbVFBQUhGY0FBQXVqQUFBTjdnQUFEZ01BQUEyMUFBQVRRd0FBQ3hrQUFBeGVBQUFJemdBQUVaUUFBQTAxQUFBSkV3QUFEcEFBQUJIakFBQUo5QUFBRFNBQUFCRFZBQUFDY2dBQUZCSUFBQTdnQUFBVEN3QUFGTUVBQUJVMUFBQVh4QUFBRnR3QUFCWC9BQUFYYUFBQUYyb0FBQnNvQUFBZHV3QUFHdklBQUJ1Q0FBQWFSQUFBR1MwQUFCNzRBQUFVRFFBQUY3Z0FBQmh2QUFBWjJ3QUFHdE1BQUJwZUFBQWI2Z0FBQWdZQUFCaVlBQUFjamdBQUh1Z0FBQ01HQUFBaU5RQUFJOGdBQUNhMkFBQWNNd0FBSEhNQUFCMVZBQUFiTGdBQUcyOEFBQjc0QUFBV053QUFGVjRBQUJXK0FBQVpKd0FBRXdrQUFCVkJBQUFYeWdBQUVpVUFBQklpQUFBUWR3QUFFZ01BQUFCL0FBQUxyUUFBQ2tFQUFBWmdkSEpoWmdBQUFCQjBabWhrQUFJQUFBQUFBQUlBQUFBUWRHWmtkQUFBQUFBQUFBQUFBQUFHT0hSeWRXNEFBQUlCQUFBQmlRQVNvZlFBQUFQSEFBQUQ4d0FBQkFJQUFBUUdBQUFEM2dBQUE3NEFBQVBOQUFBRDNRQUFBL0VBQUFQb0FBQUQrZ0FBQTk4QUFBUHVBQUFEOUFBQUE5NEFBQVBaQUFBRUJRQUFBK3dBQUFQTEFBQUQxZ0FBQkJZQUFBUDBBQUFEMUFBQUEvVUFBQVErQUFBRUlRQUFBOXNBQUFQYkFBQUQwZ0FBQkJvQUFBUGlBQUFEeUFBQUE5TUFBQVBhQUFBRUhRQUFBOFlBQUFQYUFBQUR0d0FBQS80QUFBUFhBQUFEendBQUE4Z0FBQVA2QUFBRHZnQUFBNndBQUFPdUFBQUR3QUFBQkFNQUFBTzVBQUFEaWdBQUEzSUFBQU92QUFBRGdBQUFBNFVBQUFPbEFBQUR3UUFBQTdRQUFBT3lBQUFEcVFBQUE4WUFBQVBGQUFBRHhBQUFBOEFBQUFQWEFBQUR0UUFBQTlZQUFBUEdBQUFEemdBQUErWUFBQVBTQUFBRDhnQUFBNzRBQUFQNUFBQUQ1d0FBQTlRQUFBUGpBQUFFQVFBQUEvTUFBQVBwQUFBRCt3QUFBK29BQUFRY0FBQUQ0UUFBQkJrQUFBUUVBQUFFREFBQUJCQUFBQVFqQUFBRUxBQUFCQ1FBQUFRcEFB\";\n  useEffect(() => {\n    if (videoRef.current && base64Data) {\n      // Decode the base64 data\n      const binaryData = atob(base64Data);\n      // Convert the binary data to a Uint8Array buffer\n      const arrayBuffer = new Uint8Array(binaryData.length);\n      for (let i = 0; i < binaryData.length; i++) {\n        arrayBuffer[i] = binaryData.charCodeAt(i);\n      }\n\n      // Create a Blob from the Uint8Array buffer\n      const videoBlob = new Blob([arrayBuffer], {\n        type: 'video/mp4'\n      });\n\n      // Create an object URL from the Blob\n      const videoURL = URL.createObjectURL(videoBlob);\n\n      // Set the video source to the object URL\n      videoRef.current.src = videoURL;\n\n      // Play the video\n      videoRef.current.play();\n    }\n  }, [base64Data]);\n  ///////////////////////////////only websocket\n  // useEffect(() => {\n  //   // Create a WebSocket connection\n  //   const socket = new WebSocket(\"ws://localhost:8080\");\n\n  //   socket.onopen = () => {\n  //     console.log(\"Connected to server\");\n  //   };\n\n  //   socket.onmessage = (event) => {\n  //     // Receive video data from the server\n  //     const data = event.data;\n  //     videoRef.current.src = URL.createObjectURL(data);\n  //   };\n\n  //   socket.onclose = () => {\n  //     console.log(\"Disconnected from server\");\n  //   };\n\n  //   websocketRef.current = socket;\n  //   console.log({ socket });\n\n  //   return () => {\n  //     // Clean up the WebSocket connection\n  //     websocketRef.current.close();\n  //   };\n  // }, []);\n  //////////////////////with [arr] it plays first part video\n  //   useEffect(() => {\n  //     // Create a WebSocket connection\n  //     const socket = new WebSocket(\"ws://localhost:8080\");\n\n  //     socket.onopen = () => {\n  //       console.log(\"Connected to server\");\n  //     };\n\n  //     socket.onmessage = (event) => {\n  //       // Receive video data from the server\n  //       const data = event.data;\n  //       const fileReader = new FileReader();\n\n  //       // Set up the onload event to handle the result when it's ready\n  //       fileReader.onload = function(event) {\n  //         // The result contains the Base64 encoded data\n  //         const base64Datas = event.target.result;\n\n  //         const base64Data = base64Datas.replace(/^data:application\\/octet-stream;base64,/, '');\n  //         //  const base64Data = \"GkXfo6NChoEBQveBAULygQRC84EIQoKEd2VJKQg\"\n  //         console.log(base64Data);\n  //         const binaryData = atob(base64Data);\n  // console.log(binaryData)\n  //       // Convert the binary data to a Uint8Array buffer\n  //       const arrayBuffer = new Uint8Array(binaryData.length);\n  //       for (let i = 0; i < binaryData.length; i++) {\n  //         arrayBuffer[i] = binaryData.charCodeAt(i);\n  //       }\n  //       setArr(arrayBuffer)\n  //       // Create a Blob from the Uint8Array buffer\n  //       const videoBlob = new Blob([arrayBuffer],  {type: 'video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"'});\n\n  //       // Create an object URL from the Blob\n  //       const videoURL = URL.createObjectURL(videoBlob);\n\n  //       setVideoURL(videoURL);\n  //       // Set the video source to the object URL\n  //       // videoRef.current.src = videoURL;\n\n  //       // videoRef.current.play();\n\n  //       };\n  //       // Read the Blob data as Base64\n  //       fileReader.readAsDataURL(data);\n  //     };\n\n  //     socket.onclose = () => {\n  //       console.log(\"Disconnected from server\");\n  //     };\n\n  //     websocketRef.current = socket;\n\n  //     return () => {\n  //       // Clean up the WebSocket connection\n  //       websocketRef.current.close();\n  //     };\n  //   }, [arr]);\n  const handlePlayVideo = () => {\n    if (videoURL) {\n      // Play the video if the URL is available\n      videoRef.current.src = videoURL;\n      videoRef.current.play().catch(error => {\n        console.error(\"Error while playing video:\", error);\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      controls: true,\n      muted: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 6\n  }, this);\n};\n_s(VideoPlayer, \"FoOASlv4QGk/cRw08cH/y3lSM7I=\");\n_c = VideoPlayer;\nexport default VideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"VideoPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","VideoPlayer","_s","videoRef","websocketRef","videoURL","setVideoURL","arr","setArr","base64Data","current","binaryData","atob","arrayBuffer","Uint8Array","length","i","charCodeAt","videoBlob","Blob","type","URL","createObjectURL","src","play","handlePlayVideo","catch","error","console","children","ref","controls","muted","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/msado/OneDrive/Pulpit/video-stream/video/src/components/VideoPlayer.jsx"],"sourcesContent":["// import React, { useEffect, useRef, useState } from \"react\";\r\n\r\n// const VideoPlayer = () => {\r\n//   const videoRef = useRef(null);\r\n//   const websocketRef = useRef(null);\r\n//   const videoChunksRef = useRef([]); // To store received video chunks\r\n//   console.log(videoChunksRef)\r\n//   const [videoURL, setVideoURL] = useState(null);\r\n// console.log(videoURL)\r\n//   useEffect(() => {\r\n//     // Create a WebSocket connection\r\n//     // const socket = new WebSocket(\"ws://192.168.0.185:8080\");\r\n//     const socket =new WebSocket('ws://192.168.0.186:33333')\r\n\r\n\r\n//     socket.onopen = () => {\r\n//       socket.send(\"Message to send\");\r\n//       console.log(\"Connected to server\");\r\n//     };\r\n\r\n//     socket.onmessage = (event) => {\r\n//       // Receive video data from the server\r\n//       const data = event.data;\r\n      \r\n//       const fileReader = new FileReader();\r\n//       // Set up the onload event to handle the result when it's ready\r\n//       fileReader.onload = function(event) {\r\n//         // The result contains the Base64 encoded data\r\n//         const base64Datas = event.target.result;\r\n//         const base64Data = base64Datas.replace(/^data:application\\/octet-stream;base64,/, '');\r\n//         console.log(base64Data)\r\n//         const binaryData = atob(base64Data);\r\n\r\n//         // Convert the binary data to a Uint8Array buffer\r\n//         const arrayBuffer = new Uint8Array(binaryData.length);\r\n//         for (let i = 0; i < binaryData.length; i++) {\r\n//           arrayBuffer[i] = binaryData.charCodeAt(i);\r\n//         }\r\n\r\n//         // Store the received chunk in the videoChunksRef\r\n//         videoChunksRef.current.push(arrayBuffer);\r\n\r\n//         // Combine all the chunks into a single Uint8Array buffer\r\n//         const combinedBuffer = new Uint8Array(videoChunksRef.current.reduce((totalLength, chunk) => totalLength + chunk.length, 0));\r\n//         let offset = 0;\r\n//         videoChunksRef.current.forEach(chunk => {\r\n//           combinedBuffer.set(chunk, offset);\r\n//           offset += chunk.length;\r\n//         });\r\n\r\n//         // Create a Blob from the combined Uint8Array buffer\r\n//         const videoBlob = new Blob([combinedBuffer], { type: 'video/mp4' });\r\n//         console.log(videoBlob.type)\r\n\r\n//         // Create an object URL from the Blob\r\n//         const videoURL = URL.createObjectURL(videoBlob);\r\n\r\n//         // Set the video URL state\r\n//         setVideoURL(videoURL);\r\n//       };\r\n\r\n//       // Read the Blob data as Base64\r\n//       fileReader.readAsDataURL(data);\r\n//     };\r\n\r\n//     socket.onclose = () => {\r\n//       console.log(\"Disconnected from server\");\r\n//     };\r\n\r\n//     websocketRef.current = socket;\r\n\r\n//     return () => {\r\n//       // Clean up the WebSocket connection\r\n//       websocketRef.current.close();\r\n//     };\r\n//   }, []);\r\n\r\n//   const handlePlayVideo = () => {\r\n//     if (videoURL) {\r\n//       // Play the video if the URL is available\r\n//       videoRef.current.src = videoURL;\r\n//       videoRef.current.play()\r\n//         .catch(error => {\r\n//           console.error(\"Error while playing video:\", error);\r\n//         });\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div>\r\n//       {/* Video element with controls */}\r\n//       <video ref={videoRef} controls />\r\n\r\n//       {/* Play button */}\r\n//       <button onClick={handlePlayVideo}>Play Video</button>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default VideoPlayer;\r\n// //////////////////////////////////\r\nimport React, { useEffect, useRef,useState } from \"react\";\r\n\r\nconst VideoPlayer = () => {\r\n  const videoRef = useRef(null);\r\n  const websocketRef = useRef(null);\r\n  const [videoURL, setVideoURL] = useState(null);\r\n  const [arr, setArr] = useState(null);\r\n/////////////////// decoding base-64\r\nconst base64Data = \"QUFBQUhHWjBlWEJwYzI4MUFBQUFBV0YyWXpGcGMyODFaR0Z6YUFBQUFBaG1jbVZsQUFBQVdtWnlaV1ZKYzI5TlpXUnBZU0JHYVd4bElGQnliMlIxWTJWa0lIZHBkR2dnUjFCQlF5QXdMalV1TWkxRVJWWXRjbVYyVm1WeWMybHZiam9nTUM0MUxqSXROREkyTFdkak5XRmtOR1UwSzJSbWMyYzFMVFVBQUFBRkNXMXZiM1lBQUFCc2JYWm9aQUFBQUFCOEpiQ0F6L0JjSlFBQUErZ0FBQUFBQUFFQUFBRUFBQUFBQUFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU1BQUFCNGJYWmxlQUFBQUJCdFpXaGtBQUFBQUFBQ20yc0FBQUFnZEhKbGVBQUFBQUFBQUFBQkFBQUFBUUFBQWdBQUFBQUFBQUVBQUFBQUFDQjBjbVY0QUFBQUFBQUFBQUlBQUFBQkFBQUVBQUFBQUFBQ0FBQUFBQUFBRUhSeVpYQUFBQUFBQUFBQUFRQUFBQkIwY21Wd0FBQUFBQUFBQUFJQUFBSDlkSEpoYXdBQUFGeDBhMmhrQUFBQUQzd2xzSURnMUNETkFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJBQUFBQUFBQUFBQUFBQUFBQUFBQUFRQUFBQUFBQUFBQUFBQUFBQUFBUUFBQUFBVUFBQUFDMEFBQUFBQUFKR1ZrZEhNQUFBQWNaV3h6ZEFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQVFBQUFBQUJkVzFrYVdFQUFBQWdiV1JvWkFBQUFBQjhKYkNBZkNXd2dBQUFNZ0FBQUFBQVZjUUFBQUFBQUMxb1pHeHlBQUFBQUFBQUFBQjJhV1JsQUFBQUFBQUFBQUFBQUFBQVZtbGtaVzlJWVc1a2JHVnlBQUFBQVNCdGFXNW1BQUFBRkhadGFHUUFBQUFCQUFBQUFBQUFBQUFBQUFBa1pHbHVaZ0FBQUJ4a2NtVm1BQUFBQUFBQUFBRUFBQUFNZFhKc0lBQUFBQUVBQUFEZ2MzUmliQUFBQUpSemRITmtBQUFBQUFBQUFBRUFBQUNFWVhaak1RQUFBQUFBQUFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUF0QUFTQUFBQUVnQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQmovL3dBQUFDNWhkbU5EQVUxQUgvL2hBQmRuVFVBZjJnRkFGdXdFUUFBQUF3QkFBQUFNZzhZTXFBRUFCR2p2UElBQUFBQVFjM1IwY3dBQUFBQUFBQUFBQUFBQUVITjBjMk1BQUFBQUFBQUFBQUFBQUJSemRITjZBQUFBQUFBQUFBQUFBQUFBQUFBQUVITjBZMjhBQUFBQUFBQUFBQUFBQWNCMGNtRnJBQUFBWEhScmFHUUFBQUFQZkNXd2dPRFVJTTBBQUFBQ0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRUJBQUFBQUFFQUFBQUFBQUFBQUFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBa1pXUjBjd0FBQUJ4bGJITjBBQUFBQUFBQUFBRUFBQUFBQUFBQUFBQUJBQUFBQUFFNGJXUnBZUUFBQUNCdFpHaGtBQUFBQUh3bHNJQjhKYkNBQUFDN2dBQUFBQUJWeEFBQUFBQUFMV2hrYkhJQUFBQUFBQUFBQUhOdmRXNEFBQUFBQUFBQUFBQUFBQUJUYjNWdVpFaGhibVJzWlhJQUFBQUE0MjFwYm1ZQUFBQVFjMjFvWkFBQUFBQUFBQUFBQUFBQUpHUnBibVlBQUFBY1pISmxaZ0FBQUFBQUFBQUJBQUFBREhWeWJDQUFBQUFCQUFBQXAzTjBZbXdBQUFCYmMzUnpaQUFBQUFBQUFBQUJBQUFBUzIxd05HRUFBQUFBQUFBQUFRQUFBQUFBQUFBQUFBSUFFQUFBQUFDN2dBQUFBQUFBSjJWelpITUFBQUFBQXhrQUFnQUVFVUFWQUFXekFBY2hpQUFGMjc0RkFoR3dCZ0VDQUFBQUVITjBkSE1BQUFBQUFBQUFBQUFBQUJCemRITmpBQUFBQUFBQUFBQUFBQUFVYzNSemVnQUFBQUFBQUFBQUFBQUFBQUFBQUJCemRHTnZBQUFBQUFBQUFBQUFBQUJnZFdSMFlRQUFBRmh0WlhSaEFBQUFBQUFBQUNGb1pHeHlBQUFBQUFBQUFBQnRaR2x5WVhCd2JBQUFBQUFBQUFBQUFBQUFBQ3RwYkhOMEFBQUFJNmwwYjI4QUFBQWJaR0YwWVFBQUFBRUFBQUFBVEdGMlpqVXpMakkwTGpJQUFBQXNjMmxrZUFBQUFBQUFBQUFCQUFBeUFBQUFBQUFBQUFBQUFBQUFBUUFZczNnQUFhUUFrQUFBQUFBQUNnQnRiMjltQUFBQUVHMW1hR1FBQUFBQUFBQUFBUUFBQTRoMGNtRm1BQUFBRUhSbWFHUUFBZ0FBQUFBQUFRQUFBQkIwWm1SMEFBQUFBQUFBQUFBQUFBTmdkSEoxYmdBQUFnVUFBQURTQUFBS0NBQUFBQUFBQVpzcEFBQUdFZ0FBQ0drQUFBaWdBQUFKMndBQURCQUFBQkJjQUFBQmJRQUFEZk1BQUE5K0FBQVA4UUFBRWhjQUFCT0VBQUFYRlFBQUYyc0FBQmtUQUFBWVJBQUFHbW9BQUJpVEFBQWE5Z0FBR3dRQUFCMHRBQUFiOEFBQUhiY0FBQjN2QUFBZDFRQUFIRWtBQUIxZ0FBQWNRUUFBSGYwQUFCd3FBQUFmdXdBQUF4Y0FBQmdlQUFBYStnQUFHMW9BQUIxZkFBQWRWQUFBSUJvQUFDQkJBQUFocXdBQUg0Y0FBQ0JLQUFBZWJnQUFIelVBQUI2U0FBQWQ0UUFBRzBFQUFCdENBQUFZSFFBQUdUTUFBQmZiQUFBWFRRQUFGcnNBQUJmaUFBQVhzQUFBR2U4QUFBTE9BQUFURmdBQUZWQUFBQlN5QUFBV1BRQUFGZ3NBQUJiS0FBQVY3d0FBRm1JQUFCUjNBQUFZRkFBQUdBNEFBQm5QQUFBWmtRQUFHcEFBQUJyNEFBQWI2Z0FBRytFQUFCNHJBQUFkb1FBQUljd0FBQmw1QUFBaGJ3QUFJTG9BQUJYekFBQUdqZ0FBR2RnQUFCMmpBQUFQV1FBQUZ1Y0FBQk9WQUFBY293QUFDbmtBQUErWUFBQUtPQUFBQ1JrQUFBZ3dBQUFJVmdBQUJaMEFBQWFPQUFBTkRRQUFDbUlBQUFwK0FBQUx0UUFBQzdrQUFBbzJBQUFPQXdBQUVmY0FBQllLQUFBYVpRQUFBeEFBQUJTbEFBQVQvUUFBRmJFQUFCWGhBQUFVb1FBQUhHWUFBQXhLQUFBS2xBQUFFaXdBQUFkK0FBQUlZQUFBRHBVQUFBMlJBQUFTTFFBQUNSd0FBQW9oQUFBSnVBQUFFTkFBQUF0REFBQUlpZ0FBRFRRQUFCRTdBQUFTYWdBQUZYZ0FBQU5MQUFBVE5nQUFGcG9BQUJxTkFBQVpVZ0FBR3ZZQUFCcnFBQUFXbVFBQUhGY0FBQXVqQUFBTjdnQUFEZ01BQUEyMUFBQVRRd0FBQ3hrQUFBeGVBQUFJemdBQUVaUUFBQTAxQUFBSkV3QUFEcEFBQUJIakFBQUo5QUFBRFNBQUFCRFZBQUFDY2dBQUZCSUFBQTdnQUFBVEN3QUFGTUVBQUJVMUFBQVh4QUFBRnR3QUFCWC9BQUFYYUFBQUYyb0FBQnNvQUFBZHV3QUFHdklBQUJ1Q0FBQWFSQUFBR1MwQUFCNzRBQUFVRFFBQUY3Z0FBQmh2QUFBWjJ3QUFHdE1BQUJwZUFBQWI2Z0FBQWdZQUFCaVlBQUFjamdBQUh1Z0FBQ01HQUFBaU5RQUFJOGdBQUNhMkFBQWNNd0FBSEhNQUFCMVZBQUFiTGdBQUcyOEFBQjc0QUFBV053QUFGVjRBQUJXK0FBQVpKd0FBRXdrQUFCVkJBQUFYeWdBQUVpVUFBQklpQUFBUWR3QUFFZ01BQUFCL0FBQUxyUUFBQ2tFQUFBWmdkSEpoWmdBQUFCQjBabWhrQUFJQUFBQUFBQUlBQUFBUWRHWmtkQUFBQUFBQUFBQUFBQUFHT0hSeWRXNEFBQUlCQUFBQmlRQVNvZlFBQUFQSEFBQUQ4d0FBQkFJQUFBUUdBQUFEM2dBQUE3NEFBQVBOQUFBRDNRQUFBL0VBQUFQb0FBQUQrZ0FBQTk4QUFBUHVBQUFEOUFBQUE5NEFBQVBaQUFBRUJRQUFBK3dBQUFQTEFBQUQxZ0FBQkJZQUFBUDBBQUFEMUFBQUEvVUFBQVErQUFBRUlRQUFBOXNBQUFQYkFBQUQwZ0FBQkJvQUFBUGlBQUFEeUFBQUE5TUFBQVBhQUFBRUhRQUFBOFlBQUFQYUFBQUR0d0FBQS80QUFBUFhBQUFEendBQUE4Z0FBQVA2QUFBRHZnQUFBNndBQUFPdUFBQUR3QUFBQkFNQUFBTzVBQUFEaWdBQUEzSUFBQU92QUFBRGdBQUFBNFVBQUFPbEFBQUR3UUFBQTdRQUFBT3lBQUFEcVFBQUE4WUFBQVBGQUFBRHhBQUFBOEFBQUFQWEFBQUR0UUFBQTlZQUFBUEdBQUFEemdBQUErWUFBQVBTQUFBRDhnQUFBNzRBQUFQNUFBQUQ1d0FBQTlRQUFBUGpBQUFFQVFBQUEvTUFBQVBwQUFBRCt3QUFBK29BQUFRY0FBQUQ0UUFBQkJrQUFBUUVBQUFFREFBQUJCQUFBQVFqQUFBRUxBQUFCQ1FBQUFRcEFB\"\r\nuseEffect(() => {\r\n  if (videoRef.current && base64Data) {\r\n    // Decode the base64 data\r\n    const binaryData = atob(base64Data);\r\n    // Convert the binary data to a Uint8Array buffer\r\n    const arrayBuffer = new Uint8Array(binaryData.length);\r\n    for (let i = 0; i < binaryData.length; i++) {\r\n      arrayBuffer[i] = binaryData.charCodeAt(i);\r\n    }\r\n\r\n    // Create a Blob from the Uint8Array buffer\r\n    const videoBlob = new Blob([arrayBuffer], { type: 'video/mp4' });\r\n\r\n    // Create an object URL from the Blob\r\n    const videoURL = URL.createObjectURL(videoBlob);\r\n\r\n    // Set the video source to the object URL\r\n    videoRef.current.src = videoURL;\r\n\r\n    // Play the video\r\n    videoRef.current.play();\r\n  }\r\n}, [base64Data]);\r\n///////////////////////////////only websocket\r\n// useEffect(() => {\r\n//   // Create a WebSocket connection\r\n//   const socket = new WebSocket(\"ws://localhost:8080\");\r\n\r\n//   socket.onopen = () => {\r\n//     console.log(\"Connected to server\");\r\n//   };\r\n\r\n//   socket.onmessage = (event) => {\r\n//     // Receive video data from the server\r\n//     const data = event.data;\r\n//     videoRef.current.src = URL.createObjectURL(data);\r\n//   };\r\n\r\n//   socket.onclose = () => {\r\n//     console.log(\"Disconnected from server\");\r\n//   };\r\n\r\n//   websocketRef.current = socket;\r\n//   console.log({ socket });\r\n\r\n//   return () => {\r\n//     // Clean up the WebSocket connection\r\n//     websocketRef.current.close();\r\n//   };\r\n// }, []);\r\n//////////////////////with [arr] it plays first part video\r\n//   useEffect(() => {\r\n//     // Create a WebSocket connection\r\n//     const socket = new WebSocket(\"ws://localhost:8080\");\r\n\r\n//     socket.onopen = () => {\r\n//       console.log(\"Connected to server\");\r\n//     };\r\n\r\n//     socket.onmessage = (event) => {\r\n//       // Receive video data from the server\r\n//       const data = event.data;\r\n//       const fileReader = new FileReader();\r\n\r\n//       // Set up the onload event to handle the result when it's ready\r\n//       fileReader.onload = function(event) {\r\n//         // The result contains the Base64 encoded data\r\n//         const base64Datas = event.target.result;\r\n\r\n//         const base64Data = base64Datas.replace(/^data:application\\/octet-stream;base64,/, '');\r\n//         //  const base64Data = \"GkXfo6NChoEBQveBAULygQRC84EIQoKEd2VJKQg\"\r\n//         console.log(base64Data);\r\n//         const binaryData = atob(base64Data);\r\n// console.log(binaryData)\r\n//       // Convert the binary data to a Uint8Array buffer\r\n//       const arrayBuffer = new Uint8Array(binaryData.length);\r\n//       for (let i = 0; i < binaryData.length; i++) {\r\n//         arrayBuffer[i] = binaryData.charCodeAt(i);\r\n//       }\r\n//       setArr(arrayBuffer)\r\n//       // Create a Blob from the Uint8Array buffer\r\n//       const videoBlob = new Blob([arrayBuffer],  {type: 'video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"'});\r\n\r\n//       // Create an object URL from the Blob\r\n//       const videoURL = URL.createObjectURL(videoBlob);\r\n\r\n//       setVideoURL(videoURL);\r\n//       // Set the video source to the object URL\r\n//       // videoRef.current.src = videoURL;\r\n\r\n//       // videoRef.current.play();\r\n\r\n//       };\r\n//       // Read the Blob data as Base64\r\n//       fileReader.readAsDataURL(data);\r\n//     };\r\n\r\n//     socket.onclose = () => {\r\n//       console.log(\"Disconnected from server\");\r\n//     };\r\n\r\n//     websocketRef.current = socket;\r\n\r\n//     return () => {\r\n//       // Clean up the WebSocket connection\r\n//       websocketRef.current.close();\r\n//     };\r\n//   }, [arr]);\r\n  const handlePlayVideo = () => {\r\n    if (videoURL) {\r\n      // Play the video if the URL is available\r\n      videoRef.current.src = videoURL;\r\n      videoRef.current.play()\r\n        .catch(error => {\r\n          console.error(\"Error while playing video:\", error);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n     <div>\r\n      {/* Video element with controls */}\r\n      <video ref={videoRef} controls muted/>\r\n\r\n      {/* Play button */}\r\n      {/* <button onClick={handlePlayVideo}>Play Video</button> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoPlayer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}