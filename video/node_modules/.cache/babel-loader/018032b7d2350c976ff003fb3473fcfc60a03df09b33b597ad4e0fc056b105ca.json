{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\msado\\\\OneDrive\\\\Pulpit\\\\video-stream\\\\video\\\\src\\\\components\\\\VideoPlayer.jsx\",\n  _s = $RefreshSig$();\n// Random ints working///////////////////////////////////\n// import React, { useState, useEffect } from 'react';\n\n// const VideoBlob = () => {\n//   const [currentData, setCurrentData] = useState([]);\n\n//   useEffect(() => {\n//     const ws = new WebSocket(\"ws://localhost:8888/\");\n\n//     ws.onopen = () => {\n//       console.log('Opened Connection!');\n//     };\n\n//     ws.onmessage = (event) => {\n//       setCurrentData(JSON.parse(event.data));\n//     };\n\n//     ws.onclose = () => {\n//       console.log('Closed Connection!');\n//     };\n\n//     return () => {\n//       ws.close();\n//     };\n//   }, []);\n\n//   console.log(currentData);\n\n//   return (\n//     <div>\n//       {currentData.map((cd)=>(\n//         <div>\n//           <p>{cd.name}</p>\n//           <p>{cd.number}</p>\n//         </div>\n//       ))}\n//     </div>\n//   );\n// };\n\n// export default VideoBlob;\n\n// PING_PONG////////////////////////////////////////////////\n// import React, { useEffect, useRef } from 'react';\n\n// function VideoBlob() {\n//   const socketRef = useRef(null);\n\n//   useEffect(() => {\n//     // Create a WebSocket connection\n//     socketRef.current = new WebSocket('ws://localhost:8000');\n\n//     // Listen for messages from the server\n//     socketRef.current.onmessage = function (event) {\n//       console.log('Received: ', event.data);\n//     };\n\n//     // Clean up the WebSocket connection when the component is unmounted\n//     return () => {\n//       socketRef.current.close();\n//     };\n//   }, []);\n\n//   const sendPing = () => {\n//     if (socketRef.current.readyState === WebSocket.OPEN) {\n//       // Send a ping message to the server\n//       socketRef.current.send('ping');\n//     }\n//   };\n\n//   return (\n//     <div className=\"App\">\n//       <button onClick={sendPing}>Send Ping</button>\n//     </div>\n//   );\n// }\n\n// export default VideoBlob;\n\n// App.js chunks are coming frm server but problem is here\n// import React, { useEffect, useRef } from \"react\";\n\n// function VideoBlob() {\n//   const videoRef = useRef(null);\n//   const wsRef = useRef(null);\n//   const receivedChunks = useRef([]);\n//   const totalBytesReceived = useRef(0);\n\n//   useEffect(() => {\n//     wsRef.current = new WebSocket(\"ws://localhost:8000\");\n\n//     wsRef.current.onmessage = (event) => {\n//       const videoChunk = event.data;\n//       receivedChunks.current.push(videoChunk);\n//       totalBytesReceived.current += videoChunk.length;\n\n//       // Check if all chunks are received (e.g., by comparing total received bytes with expected size)\n//       // If all chunks are received, proceed to create and play the video\n\n//         const concatenatedChunks = new Uint8Array(totalBytesReceived.current);\n//         let offset = 0;\n//         for (const chunk of receivedChunks.current) {\n//           concatenatedChunks.set(chunk, offset);\n//           offset += chunk.length;\n//         }\n\n//         // Create a Blob from the concatenated chunks\n//         const videoBlob = new Blob([concatenatedChunks], { type: \"video/mp4\" });\n\n//         // Create a Blob URL\n//         const videoUrl = URL.createObjectURL(videoBlob);\n\n//         // Set the video element's src attribute to the Blob URL\n//         videoRef.current.src = videoUrl;\n\n//     };\n\n//     return () => {\n//       wsRef.current.close();\n//     };\n//   }, []);\n\n//   return (\n//     <div>\n//       <video ref={videoRef} controls />\n//     </div>\n//   );\n// }\n\n// export default VideoBlob;\n\n// //////////////////dane przychodza ale nie odtwarza video\n// import React, { useEffect, useRef } from \"react\";\n\n// function VideoPlayer() {\n//   const videoRef = useRef(null);\n//   const wsRef = useRef(null);\n//   const mediaSourceRef = useRef(null);\n//   const sourceBufferRef = useRef(null);\n//   const bufferQueueRef = useRef([]);\n//   const isAppendingRef = useRef(false);\n//   const isSourceOpenRef = useRef(false);\n\n//   useEffect(() => {\n//     wsRef.current = new WebSocket(\"ws://localhost:8000\");\n\n//     wsRef.current.onmessage = (event) => {\n//       console.log(event)\n//       if (typeof event.data === \"string\") {\n//         console.log(\"string\")\n//         const message = JSON.parse(event.data);\n\n//         if (message.type === \"metadata\") {\n//           console.log(\"metadata\")\n//           const mediaSource = new MediaSource();\n//           videoRef.current.src = URL.createObjectURL(mediaSource);\n//           mediaSourceRef.current = mediaSource;\n\n//           mediaSource.addEventListener(\"sourceopen\", handleSourceOpen);\n//           mediaSource.addEventListener(\"sourceended\", handleSourceEnded);\n//           mediaSource.addEventListener(\"error\", handleSourceError);\n//         }\n//       } else if (event.data instanceof Blob && sourceBufferRef.current) {\n//         console.log(\"third\")\n//         const videoData = event.data;\n//         bufferQueueRef.current.push(videoData);\n\n//         processBufferQueue();\n//       }\n//     };\n\n//     return () => {\n//       wsRef.current.close();\n//     };\n//   }, []);\n\n//   const handleSourceOpen = () => {\n//     const mediaSource = mediaSourceRef.current;\n//     const sourceBuffer = mediaSource.addSourceBuffer('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"');\n//     sourceBufferRef.current = sourceBuffer;\n//     isSourceOpenRef.current = true;\n\n//     sourceBuffer.addEventListener(\"updateend\", processBufferQueue);\n//   };\n\n//   const handleSourceEnded = () => {\n//     console.log(\"MediaSource ended\");\n//   };\n\n//   const handleSourceError = (error) => {\n//     console.error(\"MediaSource error:\", error);\n//   };\n//   const processBufferQueue = async () => {\n//     if (isSourceOpenRef.current && !isAppendingRef.current && bufferQueueRef.current.length > 0) {\n//       const videoData = bufferQueueRef.current.shift();\n//       isAppendingRef.current = true;\n\n//       try {\n//         const response = await fetch(URL.createObjectURL(videoData));\n//         const arrayBuffer = await response.arrayBuffer();\n//         sourceBufferRef.current.appendBuffer(arrayBuffer);\n//       } catch (error) {\n//         console.error(\"Error appending video data to SourceBuffer:\", error);\n//         isAppendingRef.current = false;\n//         processBufferQueue();\n//       }\n//     }\n//   };\n\n//   return (\n//     <div>\n//       <video ref={videoRef} controls />\n//     </div>\n//   );\n// }\n// export default VideoPlayer;\n\n// /////////////17.07 decoding works fine\nimport React, { useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoPlayer = () => {\n  _s();\n  const videoRef = useRef(null);\n  const websocketRef = useRef(null);\n  const base64Data = \"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AAAAAQAAADYAAAABAAAAAQAAADcAAAACAAAAAQAAADgAAAABAAAAAQAAADoAAAACAAAAAQAAADsAAAABAAAAAQAAADwAAAACAAAAAQAAAD0AAAABAAAAAQAAAD4AAAACAAAAAQAAAD8AAAABAAAAAQAAAEAAAAACAAAAAQAAAEEAAAABAAAAAQAAAEMAAAACAAAAAQAAAEQAAAABAAAAAQAAAEUAAAACAAAAAQAAAEYAAAABAAAAAQAAAEcAAAACAAAAAQAAAEgAAAABAAAAAQAAAEoAAAACAAAAAQAAAEsAAAABAAAAAQAAAEwAAAACAAAAAQAAAE0AAAABAAAAAQAAAE4AAAACAAAAAQAAAE8AAAABAAAAAQAAAFEAAAACAAAAAQAAAFIAAAABAAAAAQAAAFMAAAACAAAAAQAAAFQAAAABAAAAAQAAAFUAAAACAAAAAQAAAFYAAAABAAAAAQAAAFcAAAACAAAAAQAAAFgAAAABAAAAAQAAAFoAAAACAAAAAQAAAFsAAAABAAAAAQAAAFwAAAACAAAAAQAAAF0AAAABAAAAAQAAAF4AAAACAAAAAQAAAF8AAAABAAAAAQAAAGEAAAACAAAAAQAAAGIAAAABAAAAAQAAAGMAAAACAAAAAQAAAGQAAAABAAAAAQAAAGUAAAACAAAAAQAAAGYAAAABAAAAAQAAAGgAAAACAAAAAQAAAGkAAAABAAAAAQAAAGoAAAACAAAAAQAAAGsAAAABAAAAAQAAAGwAAAACAAAAAQAAAG0AAAABAAAAAQAAAG4AAAACAAAAAQAAAG8AAAABAAAAAQAAAHEAAAACAAAAAQAAAHIAAAABAAAAAQAAAHMAAAACAAAAAQAAAHQAAAABAAAAAQAAAHUAAAACAAAAAQAAAHYAAAABAAAAAQAAAHgAAAAFAAAAAQAAAtBzdHN6AAAAAAAAAAAAAACvAAAAuQAAAMcAAADrAAAA7AAAAMkAAADFAAAAzAAAALMAAADDAAAAvwAAALwAAAC7AAAAvAAAALgAAAC/AAAAvQAAALMAAAC4AAAAtgAAALsAAAC2AAAAuwAAALgAAAEHAAAArQAAAKYAAACqAAAAuAAAALgAAADFAAABFQAAAKoAAADCAAAAtAAAAK8AAACfAAAAogAAALEAAACyAAAAtgAAALsAAADNAAABCQAAAQQAAADL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\";\n  useEffect(() => {\n    if (videoRef.current && base64Data) {\n      // Decode the base64 data\n      const binaryData = atob(base64Data);\n\n      // Convert the binary data to a Uint8Array buffer\n      const arrayBuffer = new Uint8Array(binaryData.length);\n      for (let i = 0; i < binaryData.length; i++) {\n        arrayBuffer[i] = binaryData.charCodeAt(i);\n      }\n\n      // Create a Blob from the Uint8Array buffer\n      const videoBlob = new Blob([arrayBuffer], {\n        type: 'video/mp4'\n      });\n\n      // Create an object URL from the Blob\n      const videoURL = URL.createObjectURL(videoBlob);\n\n      // Set the video source to the object URL\n      videoRef.current.src = videoURL;\n\n      // Play the video\n      videoRef.current.play();\n    }\n  }, [base64Data]);\n  // ///////////////////////////////\n  // useEffect(() => {\n  //   // Create a WebSocket connection\n  //   const socket = new WebSocket(\"ws://localhost:8080\");\n\n  //   socket.onopen = () => {\n  //     console.log(\"Connected to server\");\n  //   };\n\n  //   socket.onmessage = (event) => {\n  //     // Receive video data from the server\n  //     const data = event.data;\n  //     videoRef.current.src = URL.createObjectURL(data);\n  //   };\n\n  //   socket.onclose = () => {\n  //     console.log(\"Disconnected from server\");\n  //   };\n\n  //   websocketRef.current = socket;\n  //   console.log({ socket });\n\n  //   return () => {\n  //     // Clean up the WebSocket connection\n  //     websocketRef.current.close();\n  //   };\n  // }, []);\n  // //////////////////////\n  //   useEffect(() => {\n  //     // Create a WebSocket connection\n  //     const socket = new WebSocket(\"ws://localhost:8080\");\n\n  //     socket.onopen = () => {\n  //       console.log(\"Connected to server\");\n  //     };\n\n  //     socket.onmessage = (event) => {\n  //       // Receive video data from the server\n  //       const data = event.data;\n  //       const fileReader = new FileReader();\n\n  //       // Set up the onload event to handle the result when it's ready\n  //       fileReader.onload = function(event) {\n  //         // The result contains the Base64 encoded data\n  //         const base64Datas = event.target.result;\n  //         // const base64Data = \"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\"\n  //         const base64Data = base64Datas.replace(/^data:application\\/octet-stream;base64,/, '');\n  //         //  const base64Data = \"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\"\n  //         console.log(base64Data);\n  //         const binaryData = atob(base64Data);\n  // console.log(binaryData)\n  //       // Convert the binary data to a Uint8Array buffer\n  //       const arrayBuffer = new Uint8Array(binaryData.length);\n  //       for (let i = 0; i < binaryData.length; i++) {\n  //         arrayBuffer[i] = binaryData.charCodeAt(i);\n  //       }\n\n  //       // Create a Blob from the Uint8Array buffer\n  //       const videoBlob = new Blob([arrayBuffer],  {type: 'video/mp4;  codecs=avc1.42E01E, mp4a.40.2'});\n\n  //       // Create an object URL from the Blob\n  //       const videoURL = URL.createObjectURL(videoBlob);\n\n  //       // Set the video source to the object URL\n  //       videoRef.current.src = videoURL;\n\n  //       videoRef.current.play();\n  //          // Set the video source to the Base64 data URL\n  //         // videoRef.current.src = base64Data;\n\n  //   //       // Create a new video element\n  //   //     const videoElement = document.createElement(\"video\");\n  //   //     // Set the video source to the Base64 data URL\n  //   //       // Set the 'src' attribute to the Base64 data URL\n  //   //  videoElement.src = base64Data;\n\n  //   //  // Set other video attributes if needed\n  //   //  videoElement.controls = true;\n  //   //  videoElement.autoPlay = true;\n\n  //   //  // Append the video element to the document body or a specific container\n  //   //  document.body.appendChild(videoElement);\n\n  //       };\n\n  //       // Read the Blob data as Base64\n  //       fileReader.readAsDataURL(data);\n\n  //       // changing blob to text.works\n  //       // videoRef.current.src = URL.createObjectURL(data);\n  //       // const textData = data.text()\n  //       // textData.then((res)=>{\n\n  //       //   console.log(res)\n  //       // })\n  //     };\n\n  //     socket.onclose = () => {\n  //       console.log(\"Disconnected from server\");\n  //     };\n\n  //     websocketRef.current = socket;\n\n  //     return () => {\n  //       // Clean up the WebSocket connection\n  //       websocketRef.current.close();\n  //     };\n  //   }, []);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      controls: true,\n      autoPlay: true,\n      muted: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 361,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoPlayer, \"tqMgLWmKoVko53x0Xaoars4NEKk=\");\n_c = VideoPlayer;\nexport default VideoPlayer;\n\n// REACTPLAYER for hls\n\n// import ReactPlayer from 'react-player';\n// import React, { useEffect, useRef } from \"react\";\n\n// const VideoPlayer = () => {\n//   //   const videoRef = useRef(null);\n//   // const websocketRef = useRef(null);\n\n//   //  useEffect(() => {\n//   //   // Create a WebSocket connection\n//   //   const socket = new WebSocket(\"ws://localhost:8000\");\n\n//   //   socket.onopen = () => {\n//   //     console.log(\"Connected to server\");\n//   //   };\n\n//   //   socket.onmessage = (event) => {\n//   //     // Receive video data from the server\n//   //     const data = event.data;\n//   //     videoRef.current.src = URL.createObjectURL(data);\n//   //   };\n\n//   //   socket.onclose = () => {\n//   //     console.log(\"Disconnected from server\");\n//   //   };\n\n//   //   websocketRef.current = socket;\n//   //   console.log({ socket });\n\n//   //   return () => {\n//   //     // Clean up the WebSocket connection\n//   //     websocketRef.current.close();\n//   //   };\n//   // }, []);\n//   return (\n//     <ReactPlayer\n//       // url='<https://www.youtube.com/watch?v=dQw4w9WgXcQ>'\n//       // url='https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8'\n//       // url='http://192.168.128.149:8888/startvideo/?token=test&deviceid=2'\n//       url=\"http://localhost:8000\"\n//       controls\n//       playing\n//       width=\"100%\"\n//       height=\"auto\"\n//     />\n//   );\n// };\n\n// export default VideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"VideoPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","jsxDEV","_jsxDEV","VideoPlayer","_s","videoRef","websocketRef","base64Data","current","binaryData","atob","arrayBuffer","Uint8Array","length","i","charCodeAt","videoBlob","Blob","type","videoURL","URL","createObjectURL","src","play","children","ref","controls","autoPlay","muted","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/msado/OneDrive/Pulpit/video-stream/video/src/components/VideoPlayer.jsx"],"sourcesContent":["// Random ints working///////////////////////////////////\r\n// import React, { useState, useEffect } from 'react';\r\n\r\n// const VideoBlob = () => {\r\n//   const [currentData, setCurrentData] = useState([]);\r\n\r\n//   useEffect(() => {\r\n//     const ws = new WebSocket(\"ws://localhost:8888/\");\r\n\r\n//     ws.onopen = () => {\r\n//       console.log('Opened Connection!');\r\n//     };\r\n\r\n//     ws.onmessage = (event) => {\r\n//       setCurrentData(JSON.parse(event.data));\r\n//     };\r\n\r\n//     ws.onclose = () => {\r\n//       console.log('Closed Connection!');\r\n//     };\r\n\r\n//     return () => {\r\n//       ws.close();\r\n//     };\r\n//   }, []);\r\n\r\n//   console.log(currentData);\r\n\r\n//   return (\r\n//     <div>\r\n//       {currentData.map((cd)=>(\r\n//         <div>\r\n//           <p>{cd.name}</p>\r\n//           <p>{cd.number}</p>\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default VideoBlob;\r\n\r\n// PING_PONG////////////////////////////////////////////////\r\n// import React, { useEffect, useRef } from 'react';\r\n\r\n// function VideoBlob() {\r\n//   const socketRef = useRef(null);\r\n\r\n//   useEffect(() => {\r\n//     // Create a WebSocket connection\r\n//     socketRef.current = new WebSocket('ws://localhost:8000');\r\n\r\n//     // Listen for messages from the server\r\n//     socketRef.current.onmessage = function (event) {\r\n//       console.log('Received: ', event.data);\r\n//     };\r\n\r\n//     // Clean up the WebSocket connection when the component is unmounted\r\n//     return () => {\r\n//       socketRef.current.close();\r\n//     };\r\n//   }, []);\r\n\r\n//   const sendPing = () => {\r\n//     if (socketRef.current.readyState === WebSocket.OPEN) {\r\n//       // Send a ping message to the server\r\n//       socketRef.current.send('ping');\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"App\">\r\n//       <button onClick={sendPing}>Send Ping</button>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default VideoBlob;\r\n\r\n// App.js chunks are coming frm server but problem is here\r\n// import React, { useEffect, useRef } from \"react\";\r\n\r\n// function VideoBlob() {\r\n//   const videoRef = useRef(null);\r\n//   const wsRef = useRef(null);\r\n//   const receivedChunks = useRef([]);\r\n//   const totalBytesReceived = useRef(0);\r\n\r\n//   useEffect(() => {\r\n//     wsRef.current = new WebSocket(\"ws://localhost:8000\");\r\n\r\n//     wsRef.current.onmessage = (event) => {\r\n//       const videoChunk = event.data;\r\n//       receivedChunks.current.push(videoChunk);\r\n//       totalBytesReceived.current += videoChunk.length;\r\n\r\n//       // Check if all chunks are received (e.g., by comparing total received bytes with expected size)\r\n//       // If all chunks are received, proceed to create and play the video\r\n\r\n//         const concatenatedChunks = new Uint8Array(totalBytesReceived.current);\r\n//         let offset = 0;\r\n//         for (const chunk of receivedChunks.current) {\r\n//           concatenatedChunks.set(chunk, offset);\r\n//           offset += chunk.length;\r\n//         }\r\n\r\n//         // Create a Blob from the concatenated chunks\r\n//         const videoBlob = new Blob([concatenatedChunks], { type: \"video/mp4\" });\r\n\r\n//         // Create a Blob URL\r\n//         const videoUrl = URL.createObjectURL(videoBlob);\r\n\r\n//         // Set the video element's src attribute to the Blob URL\r\n//         videoRef.current.src = videoUrl;\r\n\r\n//     };\r\n\r\n//     return () => {\r\n//       wsRef.current.close();\r\n//     };\r\n//   }, []);\r\n\r\n//   return (\r\n//     <div>\r\n//       <video ref={videoRef} controls />\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default VideoBlob;\r\n\r\n// //////////////////dane przychodza ale nie odtwarza video\r\n// import React, { useEffect, useRef } from \"react\";\r\n\r\n// function VideoPlayer() {\r\n//   const videoRef = useRef(null);\r\n//   const wsRef = useRef(null);\r\n//   const mediaSourceRef = useRef(null);\r\n//   const sourceBufferRef = useRef(null);\r\n//   const bufferQueueRef = useRef([]);\r\n//   const isAppendingRef = useRef(false);\r\n//   const isSourceOpenRef = useRef(false);\r\n\r\n//   useEffect(() => {\r\n//     wsRef.current = new WebSocket(\"ws://localhost:8000\");\r\n\r\n//     wsRef.current.onmessage = (event) => {\r\n//       console.log(event)\r\n//       if (typeof event.data === \"string\") {\r\n//         console.log(\"string\")\r\n//         const message = JSON.parse(event.data);\r\n\r\n//         if (message.type === \"metadata\") {\r\n//           console.log(\"metadata\")\r\n//           const mediaSource = new MediaSource();\r\n//           videoRef.current.src = URL.createObjectURL(mediaSource);\r\n//           mediaSourceRef.current = mediaSource;\r\n\r\n//           mediaSource.addEventListener(\"sourceopen\", handleSourceOpen);\r\n//           mediaSource.addEventListener(\"sourceended\", handleSourceEnded);\r\n//           mediaSource.addEventListener(\"error\", handleSourceError);\r\n//         }\r\n//       } else if (event.data instanceof Blob && sourceBufferRef.current) {\r\n//         console.log(\"third\")\r\n//         const videoData = event.data;\r\n//         bufferQueueRef.current.push(videoData);\r\n\r\n//         processBufferQueue();\r\n//       }\r\n//     };\r\n\r\n//     return () => {\r\n//       wsRef.current.close();\r\n//     };\r\n//   }, []);\r\n\r\n//   const handleSourceOpen = () => {\r\n//     const mediaSource = mediaSourceRef.current;\r\n//     const sourceBuffer = mediaSource.addSourceBuffer('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"');\r\n//     sourceBufferRef.current = sourceBuffer;\r\n//     isSourceOpenRef.current = true;\r\n\r\n//     sourceBuffer.addEventListener(\"updateend\", processBufferQueue);\r\n//   };\r\n\r\n//   const handleSourceEnded = () => {\r\n//     console.log(\"MediaSource ended\");\r\n//   };\r\n\r\n//   const handleSourceError = (error) => {\r\n//     console.error(\"MediaSource error:\", error);\r\n//   };\r\n//   const processBufferQueue = async () => {\r\n//     if (isSourceOpenRef.current && !isAppendingRef.current && bufferQueueRef.current.length > 0) {\r\n//       const videoData = bufferQueueRef.current.shift();\r\n//       isAppendingRef.current = true;\r\n\r\n//       try {\r\n//         const response = await fetch(URL.createObjectURL(videoData));\r\n//         const arrayBuffer = await response.arrayBuffer();\r\n//         sourceBufferRef.current.appendBuffer(arrayBuffer);\r\n//       } catch (error) {\r\n//         console.error(\"Error appending video data to SourceBuffer:\", error);\r\n//         isAppendingRef.current = false;\r\n//         processBufferQueue();\r\n//       }\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div>\r\n//       <video ref={videoRef} controls />\r\n//     </div>\r\n//   );\r\n// }\r\n// export default VideoPlayer;\r\n\r\n// /////////////17.07 decoding works fine\r\nimport React, { useEffect, useRef } from \"react\";\r\n\r\nconst VideoPlayer = () => {\r\n  const videoRef = useRef(null);\r\n  const websocketRef = useRef(null);\r\n\r\n  const base64Data = \"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AAAAAQAAADYAAAABAAAAAQAAADcAAAACAAAAAQAAADgAAAABAAAAAQAAADoAAAACAAAAAQAAADsAAAABAAAAAQAAADwAAAACAAAAAQAAAD0AAAABAAAAAQAAAD4AAAACAAAAAQAAAD8AAAABAAAAAQAAAEAAAAACAAAAAQAAAEEAAAABAAAAAQAAAEMAAAACAAAAAQAAAEQAAAABAAAAAQAAAEUAAAACAAAAAQAAAEYAAAABAAAAAQAAAEcAAAACAAAAAQAAAEgAAAABAAAAAQAAAEoAAAACAAAAAQAAAEsAAAABAAAAAQAAAEwAAAACAAAAAQAAAE0AAAABAAAAAQAAAE4AAAACAAAAAQAAAE8AAAABAAAAAQAAAFEAAAACAAAAAQAAAFIAAAABAAAAAQAAAFMAAAACAAAAAQAAAFQAAAABAAAAAQAAAFUAAAACAAAAAQAAAFYAAAABAAAAAQAAAFcAAAACAAAAAQAAAFgAAAABAAAAAQAAAFoAAAACAAAAAQAAAFsAAAABAAAAAQAAAFwAAAACAAAAAQAAAF0AAAABAAAAAQAAAF4AAAACAAAAAQAAAF8AAAABAAAAAQAAAGEAAAACAAAAAQAAAGIAAAABAAAAAQAAAGMAAAACAAAAAQAAAGQAAAABAAAAAQAAAGUAAAACAAAAAQAAAGYAAAABAAAAAQAAAGgAAAACAAAAAQAAAGkAAAABAAAAAQAAAGoAAAACAAAAAQAAAGsAAAABAAAAAQAAAGwAAAACAAAAAQAAAG0AAAABAAAAAQAAAG4AAAACAAAAAQAAAG8AAAABAAAAAQAAAHEAAAACAAAAAQAAAHIAAAABAAAAAQAAAHMAAAACAAAAAQAAAHQAAAABAAAAAQAAAHUAAAACAAAAAQAAAHYAAAABAAAAAQAAAHgAAAAFAAAAAQAAAtBzdHN6AAAAAAAAAAAAAACvAAAAuQAAAMcAAADrAAAA7AAAAMkAAADFAAAAzAAAALMAAADDAAAAvwAAALwAAAC7AAAAvAAAALgAAAC/AAAAvQAAALMAAAC4AAAAtgAAALsAAAC2AAAAuwAAALgAAAEHAAAArQAAAKYAAACqAAAAuAAAALgAAADFAAABFQAAAKoAAADCAAAAtAAAAK8AAACfAAAAogAAALEAAACyAAAAtgAAALsAAADNAAABCQAAAQQAAADL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\"\r\n  useEffect(() => {\r\n    if (videoRef.current && base64Data) {\r\n      // Decode the base64 data\r\n      const binaryData = atob(base64Data);\r\n\r\n      // Convert the binary data to a Uint8Array buffer\r\n      const arrayBuffer = new Uint8Array(binaryData.length);\r\n      for (let i = 0; i < binaryData.length; i++) {\r\n        arrayBuffer[i] = binaryData.charCodeAt(i);\r\n      }\r\n\r\n      // Create a Blob from the Uint8Array buffer\r\n      const videoBlob = new Blob([arrayBuffer], { type: 'video/mp4' });\r\n\r\n      // Create an object URL from the Blob\r\n      const videoURL = URL.createObjectURL(videoBlob);\r\n\r\n      // Set the video source to the object URL\r\n      videoRef.current.src = videoURL;\r\n\r\n      // Play the video\r\n      videoRef.current.play();\r\n    }\r\n  }, [base64Data]);\r\n// ///////////////////////////////\r\n  // useEffect(() => {\r\n  //   // Create a WebSocket connection\r\n  //   const socket = new WebSocket(\"ws://localhost:8080\");\r\n\r\n  //   socket.onopen = () => {\r\n  //     console.log(\"Connected to server\");\r\n  //   };\r\n\r\n  //   socket.onmessage = (event) => {\r\n  //     // Receive video data from the server\r\n  //     const data = event.data;\r\n  //     videoRef.current.src = URL.createObjectURL(data);\r\n  //   };\r\n\r\n  //   socket.onclose = () => {\r\n  //     console.log(\"Disconnected from server\");\r\n  //   };\r\n\r\n  //   websocketRef.current = socket;\r\n  //   console.log({ socket });\r\n\r\n  //   return () => {\r\n  //     // Clean up the WebSocket connection\r\n  //     websocketRef.current.close();\r\n  //   };\r\n  // }, []);\r\n  // //////////////////////\r\n//   useEffect(() => {\r\n//     // Create a WebSocket connection\r\n//     const socket = new WebSocket(\"ws://localhost:8080\");\r\n\r\n//     socket.onopen = () => {\r\n//       console.log(\"Connected to server\");\r\n//     };\r\n\r\n//     socket.onmessage = (event) => {\r\n//       // Receive video data from the server\r\n//       const data = event.data;\r\n//       const fileReader = new FileReader();\r\n\r\n//       // Set up the onload event to handle the result when it's ready\r\n//       fileReader.onload = function(event) {\r\n//         // The result contains the Base64 encoded data\r\n//         const base64Datas = event.target.result;\r\n//         // const base64Data = \"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\"\r\n//         const base64Data = base64Datas.replace(/^data:application\\/octet-stream;base64,/, '');\r\n//         //  const base64Data = \"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\"\r\n//         console.log(base64Data);\r\n//         const binaryData = atob(base64Data);\r\n// console.log(binaryData)\r\n//       // Convert the binary data to a Uint8Array buffer\r\n//       const arrayBuffer = new Uint8Array(binaryData.length);\r\n//       for (let i = 0; i < binaryData.length; i++) {\r\n//         arrayBuffer[i] = binaryData.charCodeAt(i);\r\n//       }\r\n\r\n//       // Create a Blob from the Uint8Array buffer\r\n//       const videoBlob = new Blob([arrayBuffer],  {type: 'video/mp4;  codecs=avc1.42E01E, mp4a.40.2'});\r\n     \r\n//       // Create an object URL from the Blob\r\n//       const videoURL = URL.createObjectURL(videoBlob);\r\n\r\n//       // Set the video source to the object URL\r\n//       videoRef.current.src = videoURL;\r\n\r\n//       videoRef.current.play();\r\n//          // Set the video source to the Base64 data URL\r\n//         // videoRef.current.src = base64Data;\r\n\r\n//   //       // Create a new video element\r\n//   //     const videoElement = document.createElement(\"video\");\r\n//   //     // Set the video source to the Base64 data URL\r\n//   //       // Set the 'src' attribute to the Base64 data URL\r\n//   //  videoElement.src = base64Data;\r\n\r\n//   //  // Set other video attributes if needed\r\n//   //  videoElement.controls = true;\r\n//   //  videoElement.autoPlay = true;\r\n\r\n//   //  // Append the video element to the document body or a specific container\r\n//   //  document.body.appendChild(videoElement);\r\n\r\n   \r\n//       };\r\n    \r\n//       // Read the Blob data as Base64\r\n//       fileReader.readAsDataURL(data);\r\n\r\n//       // changing blob to text.works\r\n//       // videoRef.current.src = URL.createObjectURL(data);\r\n//       // const textData = data.text()\r\n//       // textData.then((res)=>{\r\n        \r\n//       //   console.log(res)\r\n//       // })\r\n//     };\r\n\r\n//     socket.onclose = () => {\r\n//       console.log(\"Disconnected from server\");\r\n//     };\r\n\r\n//     websocketRef.current = socket;\r\n\r\n//     return () => {\r\n//       // Clean up the WebSocket connection\r\n//       websocketRef.current.close();\r\n//     };\r\n//   }, []);\r\n\r\n  return (\r\n    <div>\r\n      <video ref={videoRef} controls autoPlay muted/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoPlayer;\r\n\r\n// REACTPLAYER for hls\r\n\r\n// import ReactPlayer from 'react-player';\r\n// import React, { useEffect, useRef } from \"react\";\r\n\r\n// const VideoPlayer = () => {\r\n//   //   const videoRef = useRef(null);\r\n//   // const websocketRef = useRef(null);\r\n\r\n//   //  useEffect(() => {\r\n//   //   // Create a WebSocket connection\r\n//   //   const socket = new WebSocket(\"ws://localhost:8000\");\r\n\r\n//   //   socket.onopen = () => {\r\n//   //     console.log(\"Connected to server\");\r\n//   //   };\r\n\r\n//   //   socket.onmessage = (event) => {\r\n//   //     // Receive video data from the server\r\n//   //     const data = event.data;\r\n//   //     videoRef.current.src = URL.createObjectURL(data);\r\n//   //   };\r\n\r\n//   //   socket.onclose = () => {\r\n//   //     console.log(\"Disconnected from server\");\r\n//   //   };\r\n\r\n//   //   websocketRef.current = socket;\r\n//   //   console.log({ socket });\r\n\r\n//   //   return () => {\r\n//   //     // Clean up the WebSocket connection\r\n//   //     websocketRef.current.close();\r\n//   //   };\r\n//   // }, []);\r\n//   return (\r\n//     <ReactPlayer\r\n//       // url='<https://www.youtube.com/watch?v=dQw4w9WgXcQ>'\r\n//       // url='https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8'\r\n//       // url='http://192.168.128.149:8888/startvideo/?token=test&deviceid=2'\r\n//       url=\"http://localhost:8000\"\r\n//       controls\r\n//       playing\r\n//       width=\"100%\"\r\n//       height=\"auto\"\r\n//     />\r\n//   );\r\n// };\r\n\r\n// export default VideoPlayer;\r\n"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAMC,QAAQ,GAAGL,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMM,YAAY,GAAGN,MAAM,CAAC,IAAI,CAAC;EAEjC,MAAMO,UAAU,GAAG,8saAA8sa;EACjuaR,SAAS,CAAC,MAAM;IACd,IAAIM,QAAQ,CAACG,OAAO,IAAID,UAAU,EAAE;MAClC;MACA,MAAME,UAAU,GAAGC,IAAI,CAACH,UAAU,CAAC;;MAEnC;MACA,MAAMI,WAAW,GAAG,IAAIC,UAAU,CAACH,UAAU,CAACI,MAAM,CAAC;MACrD,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,UAAU,CAACI,MAAM,EAAEC,CAAC,EAAE,EAAE;QAC1CH,WAAW,CAACG,CAAC,CAAC,GAAGL,UAAU,CAACM,UAAU,CAACD,CAAC,CAAC;MAC3C;;MAEA;MACA,MAAME,SAAS,GAAG,IAAIC,IAAI,CAAC,CAACN,WAAW,CAAC,EAAE;QAAEO,IAAI,EAAE;MAAY,CAAC,CAAC;;MAEhE;MACA,MAAMC,QAAQ,GAAGC,GAAG,CAACC,eAAe,CAACL,SAAS,CAAC;;MAE/C;MACAX,QAAQ,CAACG,OAAO,CAACc,GAAG,GAAGH,QAAQ;;MAE/B;MACAd,QAAQ,CAACG,OAAO,CAACe,IAAI,CAAC,CAAC;IACzB;EACF,CAAC,EAAE,CAAChB,UAAU,CAAC,CAAC;EAClB;EACE;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACF;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;;EAGA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;;EAEE,oBACEL,OAAA;IAAAsB,QAAA,eACEtB,OAAA;MAAOuB,GAAG,EAAEpB,QAAS;MAACqB,QAAQ;MAACC,QAAQ;MAACC,KAAK;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC5C,CAAC;AAEV,CAAC;AAAC5B,EAAA,CAhJID,WAAW;AAAA8B,EAAA,GAAX9B,WAAW;AAkJjB,eAAeA,WAAW;;AAE1B;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}